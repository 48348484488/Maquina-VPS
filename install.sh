#!/bin/bash
clear;echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  ğŸš€ Instalador Wine Pawn para VS Code v3.0";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";sleep 1;echo "ğŸ” [1/7] Verificando extensÃµes do VS Code...";EXT_PAWN_INSTALLED=false;EXT_TASK_INSTALLED=false;if code --list-extensions 2>/dev/null|grep -q "southclaws.vscode-pawn";then EXT_PAWN_INSTALLED=true;echo "âœ“ southclaws.vscode-pawn jÃ¡ instalada";fi;if code --list-extensions 2>/dev/null|grep -q "sanaajani.taskrunnercode";then EXT_TASK_INSTALLED=true;echo "âœ“ sanaajani.taskrunnercode jÃ¡ instalada";fi;if [ "$EXT_PAWN_INSTALLED" = false ]&&[ "$EXT_TASK_INSTALLED" = false ];then echo "âš ï¸  Nenhuma extensÃ£o detectada";fi;sleep 1;echo "";echo "ğŸ§¹ [2/7] Limpando diretÃ³rio de trabalho...";sudo rm -rf pawno pawncc gamemodes .vscode 2>/dev/null;shopt -s dotglob nullglob;for item in *;do [ "$item" != ".git" ]&&sudo rm -rf "$item" 2>/dev/null;done;shopt -u dotglob nullglob;echo "âœ“ DiretÃ³rio limpo com sucesso";sleep 1;echo "";echo "ğŸ· [3/7] Verificando Wine...";WINE_ALREADY_INSTALLED=false;if command -v wine >/dev/null 2>&1;then EXISTING_WINE_VER=$(wine --version 2>/dev/null);if [ -n "$EXISTING_WINE_VER" ];then echo "âœ“ Wine jÃ¡ instalado: $EXISTING_WINE_VER";WINE_ALREADY_INSTALLED=true;fi;fi;if [ "$WINE_ALREADY_INSTALLED" = false ];then echo "â³ Instalando Wine 32-bit (2-5 minutos)...";echo "â³ Aguarde... Este processo pode demorar.";echo "";sudo apt remove --purge wine wine32 wine64 -y >/dev/null 2>&1;sudo apt autoremove -y >/dev/null 2>&1;rm -rf ~/.wine;sudo dpkg --add-architecture i386 >/dev/null 2>&1;sudo apt update >/dev/null 2>&1;sudo mkdir -pm755 /etc/apt/keyrings >/dev/null 2>&1;sudo wget -q -O /etc/apt/keyrings/winehq-archive.key https://dl.winehq.org/wine-builds/winehq.key;sudo wget -q -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/jammy/winehq-jammy.sources;sudo apt update >/dev/null 2>&1;sudo apt install --install-recommends winehq-stable -y >/dev/null 2>&1;mkdir -p /tmp/runtime-codespace;chmod 700 /tmp/runtime-codespace;export XDG_RUNTIME_DIR=/tmp/runtime-codespace;export WINEARCH=win32;export WINEPREFIX=~/.wine;export WINEDEBUG=-all;export DISPLAY=:0;wineboot -u >/dev/null 2>&1;if ! grep -q "WINEARCH=win32" ~/.bashrc;then echo -e "\n# ConfiguraÃ§Ã£o Wine 32-bit" >> ~/.bashrc;echo "export XDG_RUNTIME_DIR=/tmp/runtime-codespace" >> ~/.bashrc;echo "export WINEARCH=win32" >> ~/.bashrc;echo "export WINEPREFIX=~/.wine" >> ~/.bashrc;echo "export WINEDEBUG=-all" >> ~/.bashrc;echo "export DISPLAY=:0" >> ~/.bashrc;fi;source ~/.bashrc;if command -v wine >/dev/null 2>&1;then WINE_VERSION=$(wine --version 2>/dev/null);echo "âœ“ Wine instalado com sucesso [$WINE_VERSION]";else echo "âŒ Falha ao instalar Wine";fi;fi;sleep 1;echo "";echo "ğŸ“¦ [4/7] Verificando dependÃªncias...";DEPS_ALREADY_INSTALLED=true;MISSING_DEPS="";command -v unzip >/dev/null 2>&1||{ DEPS_ALREADY_INSTALLED=false;MISSING_DEPS="$MISSING_DEPS unzip";};command -v zip >/dev/null 2>&1||{ DEPS_ALREADY_INSTALLED=false;MISSING_DEPS="$MISSING_DEPS zip";};command -v wget >/dev/null 2>&1||{ DEPS_ALREADY_INSTALLED=false;MISSING_DEPS="$MISSING_DEPS wget";};command -v curl >/dev/null 2>&1||{ DEPS_ALREADY_INSTALLED=false;MISSING_DEPS="$MISSING_DEPS curl";};if [ "$DEPS_ALREADY_INSTALLED" = true ];then echo "âœ“ Todas as dependÃªncias jÃ¡ instaladas";else echo "âš ï¸  Instalando dependÃªncias:$MISSING_DEPS";sudo apt install -y unzip zip wget curl >/dev/null 2>&1;echo "âœ“ DependÃªncias instaladas com sucesso";fi;sleep 1;echo "";clear;echo "âš™ï¸  [5/7] Configurando ambiente de desenvolvimento...";echo "â³ Baixando task.zip...";wget -q https://github.com/48348484488/Maquina-VPS/raw/74c1d4876c3342d3df52d7db0142fef90f05f4bd/task.zip 2>&1;if [ -f "task.zip" ];then TASK_SIZE=$(du -h task.zip|cut -f1);echo "âœ“ Download concluÃ­do [$TASK_SIZE]";echo "";echo "ğŸ“‚ Extraindo configuraÃ§Ãµes...";unzip -q -o task.zip;rm -f task.zip;if [ -d "vscode" ];then mv vscode .vscode 2>/dev/null;fi;if [ -d ".vscode" ]&&[ -f ".vscode/tasks.json" ];then echo "âœ“ Ambiente configurado [tasks.json criado]";else echo "âŒ Erro na configuraÃ§Ã£o do ambiente";exit 1;fi;else echo "âŒ Falha no download do task.zip";echo "âš ï¸  Tentando download alternativo...";wget --no-check-certificate -q https://github.com/48348484488/Maquina-VPS/raw/74c1d4876c3342d3df52d7db0142fef90f05f4bd/task.zip 2>&1;if [ -f "task.zip" ];then echo "âœ“ Download alternativo concluÃ­do";unzip -q -o task.zip;rm -f task.zip;[ -d "vscode" ]&&mv vscode .vscode 2>/dev/null;echo "âœ“ Ambiente configurado";else echo "âŒ Falha total no download do task.zip";exit 1;fi;fi;sleep 1;echo "";echo "ğŸ”Œ [6/7] Instalando extensÃµes do VS Code...";if [ "$EXT_PAWN_INSTALLED" = true ]&&[ "$EXT_TASK_INSTALLED" = true ];then echo "âœ“ ExtensÃµes jÃ¡ instaladas - pulando";else if [ "$EXT_PAWN_INSTALLED" = false ];then echo "â³ Instalando southclaws.vscode-pawn...";code --install-extension southclaws.vscode-pawn >/dev/null 2>&1;fi;if [ "$EXT_TASK_INSTALLED" = false ];then echo "â³ Instalando sanaajani.taskrunnercode...";code --install-extension sanaajani.taskrunnercode >/dev/null 2>&1;fi;sleep 2;EXT_PAWN=$(code --list-extensions 2>/dev/null|grep -c "southclaws.vscode-pawn");EXT_TASK=$(code --list-extensions 2>/dev/null|grep -c "sanaajani.taskrunnercode");TOTAL_EXT=$((EXT_PAWN + EXT_TASK));if [ "$TOTAL_EXT" -eq 2 ];then echo "âœ“ ExtensÃµes confirmadas [2/2]";elif [ "$TOTAL_EXT" -eq 1 ];then echo "âš ï¸  ExtensÃµes parcialmente instaladas [1/2]";echo "âš ï¸  SoluÃ§Ã£o: Atualize a pÃ¡gina (F5) e tente novamente";else echo "âŒ Erro ao instalar extensÃµes";echo "âŒ SoluÃ§Ã£o: Atualize a pÃ¡gina (F5) e execute o script novamente";fi;fi;sleep 1;echo "";clear;echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  ğŸ“¥ [7/7] Download do Arquivo MediaFire";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";echo "Insira a URL completa do MediaFire:";echo "(Ex: https://www.mediafire.com/file/XXXXXXXXX/arquivo.zip/file)";echo "";read -p "ğŸ”— URL: " MEDIAFIRE_URL;echo "";if [ -z "$MEDIAFIRE_URL" ];then echo "âš ï¸  URL nÃ£o fornecida - pulando download";echo "âœ“ InstalaÃ§Ã£o concluÃ­da sem arquivos externos";elif echo "$MEDIAFIRE_URL"|grep -q "mediafire.com";then echo "âœ“ URL do MediaFire detectada";echo "";FILE_ID=$(echo "$MEDIAFIRE_URL"|grep -oP '(?<=file/)[^/]+'|head -1);if [ -z "$FILE_ID" ];then echo "âŒ Erro: NÃ£o foi possÃ­vel extrair ID da URL";echo "âš ï¸  Continuando sem download...";else echo "âœ“ ID do arquivo: $FILE_ID";echo "";FILENAME=$(echo "$MEDIAFIRE_URL"|grep -oP '(?<=/)[^/]+(?=/file)'|head -1);[ -z "$FILENAME" ]||[ "$FILENAME" = "file" ]&&FILENAME="gamemode.zip";echo "â˜ï¸  Obtendo link direto do MediaFire...";DIRECT_LINK=$(curl -sL "$MEDIAFIRE_URL"|grep -oP 'https://download[0-9]+\.mediafire\.com/[^"]+'|head -1);if [ -z "$DIRECT_LINK" ];then echo "âŒ NÃ£o foi possÃ­vel obter o link direto";echo "âš ï¸  Verifique se a URL estÃ¡ correta";else clear;echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  ğŸ“¥ Download em Progresso";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";echo "â¬‡ï¸  Baixando arquivo do MediaFire...";echo "â³ Aguarde, isso pode levar alguns momentos...";echo "";wget -q "$DIRECT_LINK" -O "$FILENAME" 2>&1;if [ -f "$FILENAME" ];then FILE_SIZE=$(du -h "$FILENAME"|cut -f1);echo "";echo "âœ“ Download concluÃ­do [$FILE_SIZE]";echo "";echo "ğŸ” Verificando tipo de arquivo...";if unzip -t "$FILENAME" 2>&1|grep -qi "password\|encrypted";then echo "";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  ğŸ”’ ARQUIVO PROTEGIDO POR SENHA";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";MAX_ATTEMPTS=5;ATTEMPT=0;while [ $ATTEMPT -lt $MAX_ATTEMPTS ];do ATTEMPT=$((ATTEMPT + 1));echo "ğŸ“Œ Tentativa $ATTEMPT de $MAX_ATTEMPTS";echo "";read -p "ğŸ”‘ Digite a senha: " PASSWORD;if [ -z "$PASSWORD" ];then echo "";echo "âš ï¸  OperaÃ§Ã£o cancelada pelo usuÃ¡rio";echo "ğŸ“ Arquivo mantido: $FILENAME";break;fi;echo "";echo "â³ Verificando senha e extraindo...";if unzip -q -o -P "$PASSWORD" "$FILENAME" 2>/dev/null;then rm -f "$FILENAME";echo "";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  âœ… EXTRAÃ‡ÃƒO CONCLUÃDA COM SUCESSO!";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";break;else if [ $ATTEMPT -lt $MAX_ATTEMPTS ];then echo "";echo "âŒ Senha incorreta! Tente novamente.";echo "";else echo "";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  âŒ LIMITE DE TENTATIVAS ATINGIDO";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";echo "ğŸ“ Arquivo mantido: $FILENAME";echo "ğŸ’¡ Execute o comando manualmente:";echo "   unzip -P 'sua_senha' $FILENAME";fi;fi;done;else echo "âœ… Arquivo sem proteÃ§Ã£o detectado";echo "";echo "ğŸ“‚ Extraindo arquivos...";if unzip -q -o "$FILENAME" 2>/dev/null;then rm -f "$FILENAME";echo "âœ… ExtraÃ§Ã£o concluÃ­da!";else echo "âŒ Erro durante a extraÃ§Ã£o";echo "ğŸ“ Arquivo mantido: $FILENAME";fi;fi;else echo "âŒ Falha no download";fi;fi;fi;else echo "âŒ URL invÃ¡lida - deve ser do MediaFire";fi;echo "";sleep 1;echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  âœ… INSTALAÃ‡ÃƒO CONCLUÃDA";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";echo "ğŸ”§ COMPONENTES INSTALADOS:";echo "";if command -v wine >/dev/null 2>&1;then WINE_VER=$(wine --version 2>/dev/null|head -n1);echo "  âœ… Wine: $WINE_VER";echo "     â””â”€ Arquitetura: win32";echo "     â””â”€ Prefix: ~/.wine";else echo "  âŒ Wine: NÃƒO INSTALADO";fi;echo "";if [ -d "pawncc" ];then PAWNCC_SIZE=$(du -sh pawncc 2>/dev/null|cut -f1);echo "  âœ… Compilador Pawn";echo "     â””â”€ LocalizaÃ§Ã£o: $(pwd)/pawncc";echo "     â””â”€ Tamanho: $PAWNCC_SIZE";elif [ -d "pawno" ];then PAWNO_SIZE=$(du -sh pawno 2>/dev/null|cut -f1);echo "  âœ… Compilador Pawn";echo "     â””â”€ LocalizaÃ§Ã£o: $(pwd)/pawno";echo "     â””â”€ Tamanho: $PAWNO_SIZE";else echo "  âš ï¸  Compilador Pawn: Aguardando arquivo do MediaFire";fi;echo "";if command -v code >/dev/null 2>&1;then VSCODE_VER=$(code --version 2>/dev/null|head -n1);echo "  âœ… Visual Studio Code: $VSCODE_VER";else echo "  âŒ VS Code: NÃ£o detectado";fi;echo "";echo "ğŸ”Œ EXTENSÃ•ES:";echo "";if code --list-extensions 2>/dev/null|grep "southclaws.vscode-pawn" >/dev/null;then echo "  âœ… southclaws.vscode-pawn";else echo "  âŒ southclaws.vscode-pawn (NÃƒO INSTALADA)";fi;if code --list-extensions 2>/dev/null|grep "sanaajani.taskrunnercode" >/dev/null;then echo "  âœ… sanaajani.taskrunnercode";else echo "  âŒ sanaajani.taskrunnercode (NÃƒO INSTALADA)";fi;echo "";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "  ğŸ¯ COMO USAR";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";echo "";echo "1ï¸âƒ£  Crie seus scripts .pwn na pasta gamemodes/";echo "2ï¸âƒ£  Abra o arquivo no VS Code";echo "3ï¸âƒ£  Pressione Ctrl+Shift+B para compilar";echo "4ï¸âƒ£  O arquivo .amx serÃ¡ gerado automaticamente";echo "";echo "ğŸ’¡ Dica: Use Ctrl+Shift+P â†’ 'Run Task' para mais opÃ§Ãµes";echo "";echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
